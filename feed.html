<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bakhresa Feed</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="background:#020617;color:#e5e7eb;font-family:system-ui">

<h1>Bakhresa Feed</h1>
<div id="feed"></div>

<script>
  const supabase = window.supabase.createClient(
    "https://osaxbfinrlnabjllcfgv.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zYXhiZmlucmxuYWJqbGxjZmd2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1MDY4OTEsImV4cCI6MjA4MTA4Mjg5MX0.qiQzxhYAgd3S_PZUBrT0eYsMfPgSRqP9j7LQq1h4iQE"
  );

  async function loadFeed() {
    const { data, error } = await supabase
      .from("posts")
      .select("id, content, created_at")
      .order("created_at", { ascending: false });

    if (error) {
      document.body.innerHTML = error.message;
      return;
    }

    const feed = document.getElementById("feed");
    feed.innerHTML = "";

    data.forEach(post => {
      const div = document.createElement("div");
      div.style.border = "1px solid #334155";
      div.style.padding = "12px";
      div.style.marginBottom = "12px";
      div.innerHTML = `
        <p>${post.content}</p>
        <small>${new Date(post.created_at).toLocaleString()}</small>
      `;
      feed.appendChild(div);
    });
  }

  loadFeed();
</script>

</body>
</html>
